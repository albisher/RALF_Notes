### TAGS
#database-query
#data-fetching
#filtering
#sqlalchemy
#event-processing

### TYPE
documentation

### SUMMARY
Handles reading and filtering of `TimelineEvent` records from a database with configurable sorting and counting.

### DETAILS
This box implements a SQLAlchemy-based query processor for fetching `TimelineEvent` records. It accepts optional filters (e.g., `timeline_id`, `world_id`) and an `order_by` field (defaulting to `event_date`). The query dynamically applies filters, counts matching records, orders results, and serializes them into dictionaries. Error handling logs exceptions and returns a failure response.

### KEY_FUNCTIONS
- **`__init__`**: Initializes the box with a default name and description.
- **`execute`**: Orchestrates the query execution:
  - Parses input filters and ordering criteria.
  - Constructs a SQLAlchemy query with dynamic filter application.
  - Executes the query, retrieves results, and serializes them into structured output.
  - Returns a `BoxOutput` with success status, event data, and count.

### DEPENDENCIES
`..core.box_interface`, `models.db`, `models.TimelineEvent`, `logging`, `typing.Dict`, `typing.Any`

### USAGE
1. **Input**:
   ```json
   {
     "filters": {"timeline_id": 5, "world_id": 35},
     "order_by": "event_date"
   }
   ```
2. **Output**:
   ```json
   {
     "events": [...],  // List of event dictionaries
     "count": 10       // Total matching records
   }
   ```
3. **Error Handling**: Logs exceptions and returns a `success=False` response with details.

### RELATED
[[`Box` interface documentation]], [[`TimelineEvent` model documentation]]

### CALLOUTS
>[!INFO]- Dynamic Filtering
> Supports filtering by `timeline_id`, `world_id`, `user_id`, or `event_type` via the `filters` input.
>[!WARNING]- Ordering Safety
> Only applies `order_by` if the specified field exists in `TimelineEvent`; otherwise, defaults to `event_date`.