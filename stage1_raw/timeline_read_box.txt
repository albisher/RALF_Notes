### TAGS
#database-query
#data-fetching
#filtering
#eager-loading
#event-integration

### TYPE
documentation

### SUMMARY
Handles reading and filtering Timeline records from a database with optional event inclusion and counting.

### DETAILS
The `TimelineReadBox` class implements a box interface for querying and processing Timeline records from a database. It supports filtering by various fields (e.g., `world_id`, `user_id`), ordering by `created_at`, and optionally includes related events via eager loading. The class constructs SQLAlchemy queries dynamically based on input filters, executes them, and returns structured data (timelines with events) along with a count of matching records. Error handling logs exceptions and returns a failure response.

### KEY_FUNCTIONS
- **`__init__(self, name='timeline_read')`**: Initializes the box with a default name and description.
- **`execute(self, input_data: BoxInput) -> BoxOutput`**: Core method that:
  - Parses input filters, ordering, and event inclusion.
  - Builds and executes a filtered SQLAlchemy query.
  - Serializes results into dictionaries (timelines + events) and returns them with a count.
  - Handles exceptions gracefully with logging.

### DEPENDENCIES
`..core.box_interface`, `models.db`, `models.Timeline`, `models.Event` (SQLAlchemy ORM components).

### USAGE
1. Instantiate `TimelineReadBox` (e.g., `box = TimelineReadBox()`).
2. Call `execute()` with a `BoxInput` object containing:
   - `filters` (dict): Key-value pairs for filtering (e.g., `{'world_id': 35}`).
   - `order_by` (str): Field to order by (default: `'created_at'`).
   - `include_events` (bool): Include nested events (default: `True`).
3. Output includes:
   - `timelines`: List of dictionaries with filtered records and events.
   - `count`: Total matching records.

### RELATED
[[`BoxInterface`](https://example.com/core.box_interface)], [[`Timeline Model`](https://example.com/models/Timeline]], [[`Event Model`](https://example.com/models/Event]]

### CALLOUTS
>[!INFO]- Dynamic Query Filtering
> Filters are applied conditionally based on keys in the `filters` input (e.g., `world_id`, `user_id`). Missing keys are ignored.
>[!WARNING]- Ordering Limitation
> Only fields directly accessible via `Timeline` (e.g., `created_at`) are supported for ordering. Invalid fields raise an error.